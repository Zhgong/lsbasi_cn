# 从零开始写个简单的解释器（1）
原文：[Let’s Build A Simple Interpreter. Part 1.](https://ruslanspivak.com/lsbasi-part1/)

译文：

> ”如果你不知道编译器是如何工作的，那么你就不知道计算机是如何工作的。如果你不能百分百确定你是否知道编译器是如何工作的，那么你就不知道编译器是如何工作的。“- Steve Yegge

道理摆在这里。仔细想想。无论你是新手还是老练的软件开发者，这并不重要：如果你不知道编译器和解释器是如何工作的，那么你就不知道计算机是如何工作的。就这么简单。

那么，你知道编译器和解释器是如何工作的吗？我的意思是，你100%确定你知道它们是如何工作的吗？如果你不知道。

![](./images/01/lsbasi_part1_i_dont_know.png)

或者说，如果你不知道，而且你真的为此而感到很焦躁。

![](./images/01/lsbasi_part1_omg.png)

不要担心。如果你坚持做完这一系列，和我一起打造一个解释器和编译器，最终你就会知道它们是如何工作的。而且你也会成为自己的成就感到高兴和满意。至少我希望如此。

![](./images/01/lsbasi_part1_i_know.png)

为什么要研究解释器和编译器？我给你找到三个理由。

1. 要编写一个解释器或编译器，你必须要有很多技术技能，而且这些技能需要你一起使用。编写解释器或编译器将帮助你提高这些技能，从而成为一个更好的软件开发人员。同样，你所学的技能在编写任何软件时都是有用的，而不仅仅是解释器或编译器。
2. 你真的想知道计算机是如何工作的。通常情况下，解释器和编译器看起来就像某种魔法一样。而你不应该安于这种魔法。你想解开解释器和编译器的构建过程，了解它们是如何工作的，并掌握事情的控制权。
3. 你想创建自己的编程语言或特定领域的语言。如果你创建了一门语言，你还需要为它创建一个解释器或编译器。最近，人们对新的程序设计语言的兴趣又开始复苏了。而你几乎每天都能看到一种新的编程语言出现。Elixir、Go、Rust只是其中的几个例子。

好吧，但是什么是解释器和编译器？

使用**解释器**或**编译器**的目的是将源程序以某种高级语言翻译成其他形式。是不是一头雾水？稍微忍耐一下，在本系列的后面，你会了解到源程序到底被翻译成了什么。

这时，你可能还想知道解释器和编译器之间有什么区别。在本系列里面，让我们约定，如果一个翻译器将源程序翻译成机器语言，那么它就是一个**编译器**。如果一个翻译器在不先将源程序翻译成机器语言的情况下处理和执行源程序，那么它就是一个**解释器**。直观上，它看起来是这样的。

![](./images/01/lsbasi_part1_compiler_interpreter.png)

希望到现在我已经让你已经确信，你真的想研究并且构建一个解释器和编译器。你能从这一系列课程中选到关于的解释器哪些知识呢？

具体来说是这样的：你和我将创建一个简单的，可用于Pascal语言的一个大的子集的解释器。在这个系列的最后，你将拥有一个完全可以工作的Pascal解释器和一个像Python的pdb那样的源码级调试工具。

你可能会问，为什么要用Pascal语言？首先，它并不是我为了这个系列而创造出来的语言：它是一门真正的编程语言，有很多重要的语言构造。而且一些老的、但很有用的CS书中都用Pascal编程语言来做例子（我明白这不是一个特别有说服力的理由来选择一种语言来构建解释器，但我觉得学习一种非主流的语言也是不错的改变：)

这里有一个Pascal中的阶乘函数的例子，你到时候可以用你自己的解释器来解释，并使用你将创建的交互式源码级调试工具进行调试。

```pascal
program factorial;

function factorial(n: integer): longint;
begin
    if n = 0 then
        factorial := 1
    else
        factorial := n * factorial(n - 1);
end;

var
    n: integer;

begin
    for n := 0 to 16 do
        writeln(n, '! = ', factorial(n));
end.
```

我们的Pascal解释器的实现语言将是用Python实现的，但你可以使用任何你想要的语言，因为所使用的思想并不依赖于任何特定的语言实现。好了，让我们进入正题。预备，准备，开始！